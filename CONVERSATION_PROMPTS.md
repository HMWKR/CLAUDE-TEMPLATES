# CONVERSATION_PROMPTS.md

**Claude Code CLI와 효과적으로 대화하기 위한 패턴 모음 (CE v2.0)**

> CE 원칙: 최소 토큰으로 최대 신호. 프롬프트도 컨텍스트의 일부.

---

## 목차

1. [기본 작업 모드](#1-기본-작업-모드)
2. [기능 구현](#2-기능-구현)
3. [버그 수정](#3-버그-수정)
4. [코드 리뷰](#4-코드-리뷰)
5. [리팩토링](#5-리팩토링)
6. [성능 최적화](#6-성능-최적화)
7. [테스트 작성](#7-테스트-작성)
8. [아키텍처 설계](#8-아키텍처-설계)
9. [CE 분석 모드](#9-ce-분석-모드)
10. [CE 사고 여정 작성](#10-ce-사고-여정-작성)

---

## 1. 기본 작업 모드

### 깊은 분석 모드

> Thinking budget은 기본 최대. 고수준 지시가 단계별보다 효과적.

```
[작업 내용]에 대해 깊이 분석해줘.
여러 접근법을 비교하고 추천해줘.
```

### 계획 모드

```
[기능/변경]을 구현하려고 해.
먼저 관련 코드를 파악하고 구현 계획을 세워줘.
```

### 검수 모드

```
방금 작성한 코드를 검수해줘.
기능이 요구사항대로 동작하는지 확인해줘.
```

---

## 2. 기능 구현

### 기본

```
[기능 설명]을 구현해줘.
기존 코드 패턴을 따라서 구현하고,
구현 후 테스트 방법도 알려줘.
```

### 상세 (Context-Rich)

```
[기능 설명]을 구현해줘.

배경:
- [왜 이 기능이 필요한지]
- [관련 파일: src/...]

제약:
- [기존 API 호환 유지]
- [성능 요구사항]

출력:
- 구현 코드 + 테스트 코드
```

---

## 3. 버그 수정

```
[증상 설명]이 발생해.
가능한 원인을 가능성 순으로 나열하고,
가장 가능성 높은 것부터 조사해줘.
```

---

## 4. 코드 리뷰

```
[파일/기능]을 리뷰해줘.
정확성, 보안, 성능, 가독성 관점에서 확인하고
우선순위별로 이슈를 정리해줘.
```

---

## 5. 리팩토링

```
[대상]을 리팩토링해줘.
기존 동작은 유지하면서 [개선 목표]를 달성해줘.
리팩토링 전후 비교도 보여줘.
```

---

## 6. 성능 최적화

```
[대상]의 성능을 개선해줘.
현재 병목 지점을 파악하고,
Before/After 비교가 가능한 방식으로 개선해줘.
```

---

## 7. 테스트 작성

```
[대상]에 대한 테스트를 작성해줘.
정상/예외/경계값 케이스를 커버하고,
기존 테스트 패턴을 따라줘.
```

---

## 8. 아키텍처 설계

```
[기능/시스템]의 아키텍처를 설계해줘.
요구사항, 제약, 트레이드오프를 정리하고
2-3개 옵션을 비교한 후 추천해줘.
```

---

## 9. CE 분석 모드

### 토큰 효율성 분석

```
/ce-advisor
현재 프로젝트의 CLAUDE.md와 설정 파일을 분석해서
토큰 낭비가 있는지 진단해줘.
```

### 컨텍스트 최적화

```
이 작업을 CE 관점에서 최적화해줘.
- 어떤 정보가 정말 필요한지 (Select)
- 어떤 것을 압축할 수 있는지 (Compress)
- 무관한 컨텍스트가 있는지 (Confusion 방지)
```

### 4대 실패 모드 점검

```
현재 컨텍스트에서 CE 실패 모드가 있는지 점검해줘:
- Poisoning: 검증 안 된 정보가 있는가?
- Distraction: 무관한 정보가 있는가?
- Confusion: 도구/스킬이 겹치는가?
- Clash: 지침 간 모순이 있는가?
```

---

## 10. CE 사고 여정 작성

### 작업 후 기록

```
방금 완료한 작업의 CE 사고 여정을 .thoughts/에 기록해줘.
- 어떤 파일을 읽었고 왜
- 어떤 정보를 채택/폐기했고 왜
- 실패 모드가 감지되었는지
- 적용된 CE 전략 (Write/Select/Compress/Isolate)
```

---

## CE 프롬프트 작성 원칙

| 원칙 | 적용 |
|:----:|------|
| **Right Altitude** | 너무 상세하지도, 너무 모호하지도 않게 |
| **Primacy** | 역할/목표를 프롬프트 앞에 |
| **Recency** | 출력 형식/제약을 프롬프트 뒤에 |
| **Token Efficiency** | 불필요한 반복/예시 최소화 |
| **Select** | 현재 작업에 필요한 정보만 포함 |
